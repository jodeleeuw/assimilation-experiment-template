<html style="height: 100%;">
<head>
  <link rel="stylesheet" href="jspsych/css/jspsych.css"></link>
  <style>
  .btn { width: 100px; height: 50px; margin: 50px; border: 1px solid #ccc; background-color: #eee; font-size: 14px; cursor: pointer;}
  .btn:focus, .sim-btn:focus { outline: none; }
  .btn:hover, .sim-btn:hover { background-color: #f5f5f5; }
  .sim-btn { margin: 0px; border: 1px solid #ccc; padding: 20px; background-color: #eee; font-size: 14px; cursor: pointer; }
  .selected { border: 1px solid #fcc; background-color: #fee; }
  button { font-family: 'Open Sans'}
  </style>
</head>
<body class="jspsych-display-element" style="margin:0px; height: 100%; width: 100%;">
  <div class="jspsych-content-wrapper">
    <div id="jspsych-content" class="jspsych-content">
      <p>Click the word with the vowel sound that is most similar to the one you have heard.<br>Then decide how similar or different the vowel was.</p>
      <div style="display: flex; align-content: center; flex-direction: row; flex-wrap: wrap; justify-content: space-around;">
        <button class="btn" data-vowel="he">he</button>
        <button class="btn" data-vowel="hid">hid</button>
        <button class="btn" data-vowel="hey">hey</button>
        <button class="btn" data-vowel="head">head</button>
        <button class="btn" data-vowel="had">had</button>
        <button class="btn" data-vowel="ha">ha</button>
        <button class="btn" data-vowel="haw">haw</button>
        <button class="btn" data-vowel="huh">huh</button>
        <button class="btn" data-vowel="who">who</button>
        <button class="btn" data-vowel="hood">hood</button>
        <button class="btn" data-vowel="hoe">hoe</button>
        <button class="btn" data-vowel="her">her</button>
      </div>
      <div style="margin: 20px 0px;">
        <button class="sim-btn" data-sim="1">1 (different)</button>
        <button class="sim-btn" data-sim="2">2</button>
        <button class="sim-btn" data-sim="3">3</button>
        <button class="sim-btn" data-sim="4">4</button>
        <button class="sim-btn" data-sim="5">5</button>
        <button class="sim-btn" data-sim="6">6 (similar)</button>
      </div>
      <button id="next" class="jspsych-btn" style="visibility: hidden;">Next sound</button>
    </div>
  </div>
</body>
<script>
var which_vowel = null;
var similarity = null;

var btns = document.querySelectorAll('.btn');
var btn_fn = function(e){
  var btns = document.querySelectorAll('.btn');
  for(var i = 0; i<btns.length; i++){
    btns[i].className = "btn";
  }
  e.currentTarget.className = "btn selected";
  which_vowel = e.currentTarget.dataset.vowel;
  if(similarity !== null){
    document.querySelector('#next').style.visibility = 'visible';
  }
}
for(var i=0; i < btns.length; i++){
  btns[i].addEventListener('click', btn_fn);
}

var sim_btns = document.querySelectorAll('.sim-btn');
var sim_btn_fn = function(e){
  var sim_btns = document.querySelectorAll('.sim-btn');
  for(var i = 0; i<sim_btns.length; i++){
    sim_btns[i].className = "sim-btn";
  }
  e.currentTarget.className = "sim-btn selected";
  similarity = e.currentTarget.dataset.sim;
  if(which_vowel !== null){
    document.querySelector('#next').style.visibility = 'visible';
  }
}
for(var i=0; i < sim_btns.length; i++){
  sim_btns[i].addEventListener('click', sim_btn_fn);
}

document.querySelector('#next').addEventListener('click', function(){
  alert(JSON.stringify({vowel: which_vowel, similarity: similarity}));
});
</script>
</html>
